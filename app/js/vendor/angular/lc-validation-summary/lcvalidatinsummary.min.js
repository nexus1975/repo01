var lcValidationSummary=angular.module("lcValidationSummary",[]);lcValidationSummary.directive("lcValidationBubble",function(){var a=function(a,b){if(!a.name)throw"validationbubble must be set on an input element that has a 'name' attribute";if(!a.validationFriendlyName)throw"validationbubble must define a 'validationFriendlyName' attribute for the control (this friendly name will be displayed in the validationSummary)";if(!b.$name)throw"validationbubble requires that a name is assigned to the ng-form containing the validated input"};return{require:["ngModel","^form","^lcValidationsContainer"],restrict:"A",link:function(b,c,d,e){var f=e[0],g=e[1],h=e[2],i=d.validationFriendlyName,j=d.validationCustomErrorDirective,k=d.validationCustomErrorMessage;a(d,g,h);var l=g.$name+"."+f.$name+".$valid";b.$watch(l,function(a){"undefined"!=typeof a&&h.$updateValidationResult(f,i,j,k)})}}}),lcValidationSummary.directive("lcValidationSummary",[function(){return{restrict:"A",require:"^lcValidationsContainer",templateUrl:"./src/directives/lcValidationSummary.html",link:function(a,b,c,d){var e=d;a.validationsSummary=e.getValidationMessages()}}}]),lcValidationSummary.directive("lcValidationsContainer",["arrayUtilities","validationContainerService",function(a,b){return{restrict:"A",link:function(){},controller:["$scope","$element",function(c){c.validationMessages=[],this.getValidationMessages=function(){return c.validationMessages},this.$updateValidationResult=function(d,e,f,g){var h=b.extractValidations(d);angular.forEach(h,function(h){var i=b.buildValidationKey(d.$name,h.validationType),j=a.firstIndexMatchingCriteriaOrMinusOne(c.validationMessages,"key",[i]),k=-1!=j;if(1==h.passValidation)k&&a.removeElementFromArray(c.validationMessages,j);else if(!k){var l=b.buildValidationSummaryEntry(i,e,h.validationType,f,g);c.validationMessages.push(l)}})}}]}}]),lcValidationSummary.provider("validationContainerService",function(){var a=[{type:"required",friendlyDescription:"this field is mandatory"},{type:"pattern",friendlyDescription:"this field doesn't match the pattern set"},{type:"maxlength",friendlyDescription:"this field exceeds the maximum length"},{type:"minlength",friendlyDescription:"this field doesn't reach the minimum length"}];return{removeDefaultSupportedValidations:function(){a=[]},addValidation:function(b){"undefined"!=b.type&&"undefined"!=b.friendlyDescription&&a.push(b)},$get:["$log",function(b){function c(a,b){var c={};return c.validationType=a,c.passValidation=b,c}return{extractValidations:function(d){var e=[],f=null;return"undefined"==typeof d.$error?(b.warn("The validationBubble has been set to an element with no $error property"),e):(angular.forEach(a,function(a){var b=a.type;"undefined"!=typeof d.$error[b]&&(f=c(b,0==d.$error[b]),e.push(f))}),e)},buildValidationKey:function(a,b){return a+"$"+b},buildValidationFriendlyMessage:function(b,c){var d=b+": ",e=a.length,f=0;for(f=0;e>f;f++){var g=a[f];if(c==g.type){d+=g.friendlyDescription;break}}return d},buildValidationSummaryEntry:function(a,b,c,d,e){var f={};return f.key=a,f.errorMessage="undefined"!=typeof d&&d==c?e:this.buildValidationFriendlyMessage(b,c),f}}}]}}),lcValidationSummary.factory("arrayUtilities",[function(){return{findAvailableNextNumericKey:function(a,b){for(var c=0,d=0;d<a.length;d++){var e=a[d];c<e[b]&&(c=e[b])}return c+1},firstOrDefault:function(a,b,c){for(var d=null,e=0;e<a.length;e++){for(var f=a[e],g=0;g<c.length;g++)if(c[g]==f[b]){d=f;break}if(null!=d)break}return d},firstIndexMatchingCriteriaOrMinusOne:function(a,b,c){for(var d=-1,e=0;e<a.length;e++){for(var f=a[e],g=0;g<c.length;g++)if(c[g]==f[b]){d=e;break}if(-1!=d)break}return d},removeElementFromArray:function(a,b){a.splice(b,1)},take:function(a,b,c){var d=b+1,e=a.length,f=e-d,g=f>c?c:f,h=d+g;return a.slice(d,h)},removeFirstElementByFilter:function(a,b,c){var d=this.firstIndexMatchingCriteriaOrMinusOne(a,b,c);return d>-1?(this.removeElementFromArray(a,d),!0):!1}}}]);